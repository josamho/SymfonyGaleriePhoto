{% extends 'base.html.twig' %}

{% block menu %}
		<div class="ui secondary pointing teal menu">
			<div class="left menu">Galerie Photo</div>
			<div class="right menu">
				<div class="ui item"> 
					{#  truc de connexion #}
					{% if app.user %}
						<a href="{{ path('homepage') }} "><button class="ui olive button" type="button" id="homepage"><i class="user icon"></i> Accueil</button> </a>
						<span style=" width:10px;"></span>
						<a href="{{ path('fos_user_security_logout') }} "><button class="ui red button" id="deconnexion"><i class="shutdown icon"></i> Déconnection</button></a>
					{% endif %}                 
				</div>
			</div>
		</div>

{% endblock %}
 
{% block left %}
	Actions   <br/>    
	<button class="ui olive button" type="button" id="addphoto"><i class="plus icon"></i>Ajout photo</button>

{% endblock %}

 
{% block body %}

	{% if app.session.flashbag.peekAll()|length %}
	<div class="ui segment">
				{% for label, flashes in app.session.flashbag.all %}
				  {% for flash in flashes %}
					<div class="messages {{ label }}">
					  <p>{{ flash|raw }}</p>
					</div>
				  {% endfor %}
				{% endfor %}   
	</div>
  {% endif %}

	<div class="ui modal">
		<div class="header">Ajout d'une photo</div>
		<div class="content">
			{{form_start(form)}}
			{{form_end(form)}}
		</div>
	</div>

	<h3>Ma galerie publique</h3>
	<div class="ui four column grid">
        <div class="row">
        {% for photo in photos %}
            {% set taille = photo.taille|length %}
            <div class="column" style="text-align: -webkit-center; height: 280px; margin-bottom: 10px;" data-position="{{photo.position}}">
                <img class="ui large image" src="{{ asset(photo.webPath ) }}" style="width: auto; max-height: 240px;" />
                <span style = "position: absolute; bottom: 20px; right: 75px;">{{photo.datepublication|date("d/m/Y, H:i") }}, {{photo.taille}} octets</span>
                <SELECT name="{{photo.id}}" style = "position: absolute; bottom: 0; right: 200px;" size="1">
                    {% for i in 0..nbP %}
                        {% if photo.position == i %}
                            <OPTION selected>{{i}}
                        {% else %}
                           <OPTION>{{i}}
                        {% endif %}
                    {% endfor %}
                </SELECT>
                {# <button style = "position: absolute; bottom: 0; right: 200px;" id="{{photo.id}}">{% if photo.position == '0' %}Non Publiée{% else %}Publiée{% endif %}</button> #}
                 <button style = "position: absolute; bottom: 0; right: 100px;" id="{{photo.id}}">Supprimer</button>
            </div>
        {% endfor %}
        </div>
    </div>

    <ul class="pagination">
  {# On utilise la fonction range(a, b) qui crée un tableau de valeurs entre a et b #}
        {% for p in range(1, nbPages) %}
            <li{% if p == page %} class="active"{% endif %}>
                <a href="{{ path('magalerie', {'page': p}) }}">{{ p }}</a>
            </li>
        {% endfor %}
    </ul>

{% endblock %}

{% block javascripts %}

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.js"></script>

<script>

$('#addphoto').click(function(){
	$('.ui.modal')
	  .modal('show')
	;
	// alert('click');

});

</script>

{% endblock %}